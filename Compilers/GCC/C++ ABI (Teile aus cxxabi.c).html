<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0076)http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/vec_8cc-source.html -->
<HTML><HEAD><TITLE>vec.cc Source File</TITLE>
<META http-equiv=Content-Type content=text/html;charset=iso-8859-1><LINK 
href="C++ ABI (Teile aus cxxabi.c)-Dateien/fifi-style.css" rel=stylesheet><LINK 
href="C++ ABI (Teile aus cxxabi.c)-Dateien/style.css" type=text/css 
rel=stylesheet>
<META content="MSHTML 6.00.2900.2873" name=GENERATOR></HEAD>
<BODY class=fifi><LINK 
href="C++ ABI (Teile aus cxxabi.c)-Dateien/fifi-style.css" rel=stylesheet>
<TABLE width="100%">
  <TBODY>
  <TR>
    <TD class=fifi-upbar width="1%">
      <DIV>
      <P class=fifi-logo><IMG height=158 alt="www.fifi.org logo" 
      src="C++ ABI (Teile aus cxxabi.c)-Dateien/fifi-logo.jpg" width=158></P>
      <P class=fifi-linkbar><BR><A 
      href="http://www.fifi.org/">http://www.fifi.org/</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/documentation/">Documentation</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/cgi-bin/man2html">Manpages</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/cgi-bin/info2www">GNU&nbsp;Info</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/doc/HTML/">Debian&nbsp;document&nbsp;tree</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/doc/">Whole&nbsp;document&nbsp;tree</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/trigance/">Trigance&nbsp;web&nbsp;page</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/services/">Public&nbsp;services</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/users/">User&nbsp;info</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/mailman/">Mailing&nbsp;lists</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/secure/">Secure&nbsp;server</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
      href="http://www.fifi.org/multilingual/">Multilingual&nbsp;usage</A><BR>&nbsp; 
      </P>
      <P class=fifi-copyright>Copyright (C) 2000-2006 <BR>Philippe Troin 
      <BR>&lt;<A href="mailto:webmaster@fifi.org">webmaster@fifi.org</A>&gt;. 
      </P>
      <P class=fifi-copyright><A 
      href="http://validator.w3.org/check?ss=&amp;sp=&amp;uri=http%3A//www.fifi.org/doc/gcc%2D3.0%2Dbase/libstdc%2B%2B/html_user/vec_8cc%2Dsource.html">Validate&nbsp;HTML</A> 
      <BR><A 
      href="http://jigsaw.w3.org/css-validator/validator?uri=http%3A//www.fifi.org/doc/gcc%2D3.0%2Dbase/libstdc%2B%2B/html_user/vec_8cc%2Dsource.html&amp;warning=2">Validate&nbsp;CSS</A> 
      </P></DIV></TD>
    <TD width="1%">&nbsp;&nbsp;&nbsp;&nbsp; 
    <TD class=fifi-content>
      <P class=fifi-titlehead>Whole document tree</P><!-- bof --><LINK 
      href="C++ ABI (Teile aus cxxabi.c)-Dateien/fifi-style.css" 
      rel=stylesheet><LINK href="C++ ABI (Teile aus cxxabi.c)-Dateien/style.css" 
      type=text/css rel=stylesheet><!-- Generated by Doxygen 1.2.15 -->
      <CENTER><A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/index.html">Main 
      Page</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespaces.html">Namespace 
      List</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/hierarchy.html">Class 
      Hierarchy</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/classes.html">Alphabetical 
      List</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/annotated.html">Compound 
      List</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/files.html">File 
      List</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespacemembers.html">Namespace 
      Members</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/functions.html">Compound 
      Members</A> &nbsp; <A class=qindex 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/globals.html">File 
      Members</A> &nbsp; </CENTER>
      <HR>

      <H1>vec.cc</H1><A 
      href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/vec_8cc.html">Go 
      to the documentation of this file.</A>
      <DIV class=fragment><PRE>00001 <FONT class=comment>// New abi Support -*- C++ -*-</FONT>
00002 
00003 <FONT class=comment>// Copyright (C) 2000, 2001 Free Software Foundation, Inc.</FONT>
00004 <FONT class=comment>//  </FONT>
00005 <FONT class=comment>// This file is part of GNU CC.</FONT>
00006 <FONT class=comment>//</FONT>
00007 <FONT class=comment>// GNU CC is free software; you can redistribute it and/or modify</FONT>
00008 <FONT class=comment>// it under the terms of the GNU General Public License as published by</FONT>
00009 <FONT class=comment>// the Free Software Foundation; either version 2, or (at your option)</FONT>
00010 <FONT class=comment>// any later version.</FONT>
00011 
00012 <FONT class=comment>// GNU CC is distributed in the hope that it will be useful,</FONT>
00013 <FONT class=comment>// but WITHOUT ANY WARRANTY; without even the implied warranty of</FONT>
00014 <FONT class=comment>// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</FONT>
00015 <FONT class=comment>// GNU General Public License for more details.</FONT>
00016 
00017 <FONT class=comment>// You should have received a copy of the GNU General Public License</FONT>
00018 <FONT class=comment>// along with GNU CC; see the file COPYING.  If not, write to</FONT>
00019 <FONT class=comment>// the Free Software Foundation, 59 Temple Place - Suite 330,</FONT>
00020 <FONT class=comment>// Boston, MA 02111-1307, USA. </FONT>
00021 
00022 <FONT class=comment>// As a special exception, you may use this file as part of a free software</FONT>
00023 <FONT class=comment>// library without restriction.  Specifically, if other files instantiate</FONT>
00024 <FONT class=comment>// templates or use macros or inline functions from this file, or you compile</FONT>
00025 <FONT class=comment>// this file and link it with other files to produce an executable, this</FONT>
00026 <FONT class=comment>// file does not by itself cause the resulting executable to be covered by</FONT>
00027 <FONT class=comment>// the GNU General Public License.  This exception does not however</FONT>
00028 <FONT class=comment>// invalidate any other reasons why the executable file might be covered by</FONT>
00029 <FONT class=comment>// the GNU General Public License.</FONT>
00030 
00031 <FONT class=comment>// Written by Nathan Sidwell, Codesourcery LLC, &lt;nathan@codesourcery.com&gt;</FONT>
00032 
00033 <FONT class=preprocessor>#include &lt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/cxxabi_8h.html">cxxabi.h</A>&gt;</FONT>
00034 <FONT class=preprocessor>#include &lt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/new.html">new</A>&gt;</FONT>
00035 <FONT class=preprocessor>#include &lt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception.html">exception</A>&gt;</FONT>
00036 <FONT class=preprocessor>#include &lt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html">exception_defines.h</A>&gt;</FONT>
00037 
00038 <FONT class=preprocessor>#include "<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/unwind-cxx_8h.html">unwind-cxx.h</A>"</FONT>
00039 
00040 <FONT class=keyword>namespace </FONT>__cxxabiv1
00041 {
00042   <FONT class=keyword>namespace </FONT>
00043 <FONT class=keyword>  </FONT>{
<A name=l00044></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">00044</A>     <FONT class=keyword>struct </FONT><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> 
00045     {
00046       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#a0">uncatch_exception</A> ();
<A name=l00047></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#a1">00047</A>       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#a1">~uncatch_exception</A> () { <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/eh__catch_8cc.html#a0">__cxa_begin_catch</A> (&amp;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#m0">p</A>-&gt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__exception.html#m11">unwindHeader</A>); }
00048       
<A name=l00049></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#m0">00049</A>       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__exception.html">__cxa_exception</A> *<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#m0">p</A>;
00050     };
00051 
<A name=l00052></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#a0">00052</A>     uncatch_exception::uncatch_exception ()
00053     {
00054       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__eh__globals.html">__cxa_eh_globals</A> *globals = <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/eh__globals_8cc.html#a1">__cxa_get_globals_fast</A> ();
00055 
00056       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#m0">p</A> = globals-&gt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__eh__globals.html#m0">caughtExceptions</A>;
00057       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#m0">p</A>-&gt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__exception.html#m5">handlerCount</A> -= 1;
00058       globals-&gt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__eh__globals.html#m0">caughtExceptions</A> = <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html#m0">p</A>-&gt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__exception.html#m4">nextException</A>;
00059       globals-&gt;<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1____cxa__eh__globals.html#m1">uncaughtExceptions</A> += 1;
00060     }
00061   }
00062 
00063   <FONT class=comment>// Allocate and construct array.</FONT>
00064   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT> *
<A name=l00065></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a21">00065</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a21">__cxa_vec_new</A>(std::size_t element_count,
00066         std::size_t element_size,
00067         std::size_t padding_size,
00068         <FONT class=keywordtype>void</FONT> (*constructor) (<FONT class=keywordtype>void</FONT> *),
00069         <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *))
00070   {
00071     <FONT class=keywordflow>return</FONT> <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a22">__cxa_vec_new2</A>(element_count, element_size, padding_size,
00072                constructor, destructor,
00073                &amp;<FONT class=keyword>operator</FONT> <FONT class=keyword>new</FONT>[], &amp;<FONT class=keyword>operator</FONT> <FONT class=keyword>delete</FONT> []);
00074   }
00075 
00076   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT> *
<A name=l00077></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a22">00077</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a22">__cxa_vec_new2</A>(std::size_t element_count,
00078          std::size_t element_size,
00079          std::size_t padding_size,
00080          <FONT class=keywordtype>void</FONT> (*constructor) (<FONT class=keywordtype>void</FONT> *),
00081          <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *),
00082          <FONT class=keywordtype>void</FONT> *(*<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespacestd.html#a37">alloc</A>) (std::size_t),
00083          <FONT class=keywordtype>void</FONT> (*dealloc) (<FONT class=keywordtype>void</FONT> *))
00084   {
00085     std::size_t size = element_count * element_size + padding_size;
00086     <FONT class=keywordtype>char</FONT> *base = static_cast &lt;char *&gt; (<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespacestd.html#a37">alloc</A> (size));
00087     
00088     <FONT class=keywordflow>if</FONT> (padding_size)
00089       {
00090     base += padding_size;
00091     reinterpret_cast &lt;std::size_t *&gt; (base)[-1] = element_count;
00092       }
00093     <FONT class=keywordflow>try</FONT>
00094       {
00095     <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a24">__cxa_vec_ctor</A>(base, element_count, element_size,
00096                constructor, destructor);
00097       }
00098     <FONT class=keywordflow>catch</FONT> (...)
00099       {
00100     {
00101       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> ue;
00102       dealloc(base - padding_size);
00103     }
00104     <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html#a2">__throw_exception_again</A>;
00105       }
00106     <FONT class=keywordflow>return</FONT> base;
00107   }
00108   
00109   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT> *
<A name=l00110></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a23">00110</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a23">__cxa_vec_new3</A>(std::size_t element_count,
00111          std::size_t element_size,
00112          std::size_t padding_size,
00113          <FONT class=keywordtype>void</FONT> (*constructor) (<FONT class=keywordtype>void</FONT> *),
00114          <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *),
00115          <FONT class=keywordtype>void</FONT> *(*<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespacestd.html#a37">alloc</A>) (std::size_t),
00116          <FONT class=keywordtype>void</FONT> (*dealloc) (<FONT class=keywordtype>void</FONT> *, std::size_t))
00117   {
00118     std::size_t size = element_count * element_size + padding_size;
00119     <FONT class=keywordtype>char</FONT> *base = static_cast&lt;char *&gt;(<A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespacestd.html#a37">alloc</A> (size));
00120     
00121     <FONT class=keywordflow>if</FONT> (padding_size)
00122       {
00123     base += padding_size;
00124     reinterpret_cast&lt;std::size_t *&gt;(base)[-1] = element_count;
00125       }
00126     <FONT class=keywordflow>try</FONT>
00127       {
00128     <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a24">__cxa_vec_ctor</A>(base, element_count, element_size,
00129                constructor, destructor);
00130       }
00131     <FONT class=keywordflow>catch</FONT> (...)
00132       {
00133     {
00134       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> ue;
00135       dealloc(base - padding_size, size);
00136     }
00137     <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html#a2">__throw_exception_again</A>;
00138       }
00139     <FONT class=keywordflow>return</FONT> base;
00140   }
00141   
00142   <FONT class=comment>// Construct array.</FONT>
00143   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT>
<A name=l00144></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a24">00144</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a24">__cxa_vec_ctor</A>(<FONT class=keywordtype>void</FONT> *array_address,
00145          std::size_t element_count,
00146          std::size_t element_size,
00147          <FONT class=keywordtype>void</FONT> (*constructor) (<FONT class=keywordtype>void</FONT> *),
00148          <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *))
00149   {
00150     std::size_t ix = 0;
00151     <FONT class=keywordtype>char</FONT> *ptr = static_cast&lt;char *&gt;(array_address);
00152     
00153     <FONT class=keywordflow>try</FONT>
00154       {
00155     <FONT class=keywordflow>if</FONT> (constructor)
00156       <FONT class=keywordflow>for</FONT> (; ix != element_count; ix++, ptr += element_size)
00157         constructor(ptr);
00158       }
00159     <FONT class=keywordflow>catch</FONT> (...)
00160       {
00161     {
00162       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> ue;
00163       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a27">__cxa_vec_cleanup</A>(array_address, ix, element_size, destructor);
00164     }
00165     <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html#a2">__throw_exception_again</A>;
00166       }
00167   }
00168   
00169   <FONT class=comment>// Construct an array by copying.</FONT>
00170   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT>
<A name=l00171></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a25">00171</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a25">__cxa_vec_cctor</A>(<FONT class=keywordtype>void</FONT> *dest_array,
00172           <FONT class=keywordtype>void</FONT> *src_array,
00173           std::size_t element_count,
00174           std::size_t element_size,
00175           <FONT class=keywordtype>void</FONT> (*constructor) (<FONT class=keywordtype>void</FONT> *, <FONT class=keywordtype>void</FONT> *),
00176           <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *))
00177   {
00178     std::size_t ix = 0;
00179     <FONT class=keywordtype>char</FONT> *dest_ptr = static_cast&lt;char *&gt;(dest_array);
00180     <FONT class=keywordtype>char</FONT> *src_ptr = static_cast&lt;char *&gt;(src_array);
00181     
00182     <FONT class=keywordflow>try</FONT>
00183       {
00184     <FONT class=keywordflow>if</FONT> (constructor)
00185       <FONT class=keywordflow>for</FONT> (; ix != element_count; 
00186            ix++, src_ptr += element_size, dest_ptr += element_size)
00187         constructor(dest_ptr, src_ptr);
00188       }
00189     <FONT class=keywordflow>catch</FONT> (...)
00190       {
00191     {
00192       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> ue;
00193       <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a27">__cxa_vec_cleanup</A>(dest_array, ix, element_size, destructor);
00194     }
00195     <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html#a2">__throw_exception_again</A>;
00196       }
00197   }
00198   
00199   <FONT class=comment>// Destruct array.</FONT>
00200   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT>
<A name=l00201></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a26">00201</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a26">__cxa_vec_dtor</A>(<FONT class=keywordtype>void</FONT> *array_address,
00202          std::size_t element_count,
00203          std::size_t element_size,
00204          <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *))
00205   {
00206     <FONT class=keywordflow>if</FONT> (destructor)
00207       {
00208     <FONT class=keywordtype>char</FONT> *ptr = static_cast&lt;char *&gt;(array_address);
00209     std::size_t ix = element_count;
00210 
00211     ptr += element_count * element_size;
00212 
00213     <FONT class=keywordflow>try</FONT>
00214       {
00215         <FONT class=keywordflow>while</FONT> (ix--)
00216           {
00217         ptr -= element_size;
00218         destructor(ptr);
00219           }
00220       }
00221     <FONT class=keywordflow>catch</FONT> (...)
00222       {
00223         {
00224           <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> ue;
00225           <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a27">__cxa_vec_cleanup</A>(array_address, ix, element_size, destructor);
00226         }
00227         <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html#a2">__throw_exception_again</A>;
00228       }
00229       }
00230   }
00231 
00232   <FONT class=comment>// Destruct array as a result of throwing an exception.</FONT>
00233   <FONT class=comment>// [except.ctor]/3 If a destructor called during stack unwinding</FONT>
00234   <FONT class=comment>// exits with an exception, terminate is called.</FONT>
00235   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT>
<A name=l00236></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a27">00236</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a27">__cxa_vec_cleanup</A>(<FONT class=keywordtype>void</FONT> *array_address,
00237             std::size_t element_count,
00238             std::size_t element_size,
00239             <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *))
00240   {
00241     <FONT class=keywordflow>if</FONT> (destructor)
00242       {
00243     <FONT class=keywordtype>char</FONT> *ptr = static_cast &lt;char *&gt; (array_address);
00244     std::size_t ix = element_count;
00245 
00246     ptr += element_count * element_size;
00247 
00248     <FONT class=keywordflow>try</FONT>
00249       {
00250         <FONT class=keywordflow>while</FONT> (ix--)
00251           {
00252         ptr -= element_size;
00253         destructor(ptr);
00254           }
00255       }
00256     <FONT class=keywordflow>catch</FONT> (...)
00257       {
00258         <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespacestd.html#a993">std::terminate</A>();
00259       }
00260       }
00261   }
00262 
00263   <FONT class=comment>// Destruct and release array.</FONT>
00264   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT>
<A name=l00265></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a28">00265</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a28">__cxa_vec_delete</A>(<FONT class=keywordtype>void</FONT> *array_address,
00266            std::size_t element_size,
00267            std::size_t padding_size,
00268            <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *))
00269   {
00270     <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a29">__cxa_vec_delete2</A>(array_address, element_size, padding_size,
00271                destructor,
00272                &amp;<FONT class=keyword>operator</FONT> <FONT class=keyword>delete</FONT> []);
00273   }
00274 
00275   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT>
<A name=l00276></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a29">00276</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a29">__cxa_vec_delete2</A>(<FONT class=keywordtype>void</FONT> *array_address,
00277             std::size_t element_size,
00278             std::size_t padding_size,
00279             <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *),
00280             <FONT class=keywordtype>void</FONT> (*dealloc) (<FONT class=keywordtype>void</FONT> *))
00281   {
00282     <FONT class=keywordtype>char</FONT> *base = static_cast&lt;char *&gt;(array_address);
00283   
00284     <FONT class=keywordflow>if</FONT> (padding_size)
00285       {
00286     std::size_t element_count = reinterpret_cast&lt;std::size_t *&gt;(base)[-1];
00287     base -= padding_size;
00288     <FONT class=keywordflow>try</FONT>
00289       {
00290         <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a26">__cxa_vec_dtor</A>(array_address, element_count, element_size,
00291                destructor);
00292       }
00293     <FONT class=keywordflow>catch</FONT> (...)
00294       {
00295         {
00296           <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> ue;
00297           dealloc(base);
00298         }
00299         <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html#a2">__throw_exception_again</A>;
00300       }
00301       }
00302     dealloc(base);
00303   }
00304 
00305   <FONT class=keyword>extern</FONT> <FONT class=stringliteral>"C"</FONT> <FONT class=keywordtype>void</FONT>
<A name=l00306></A><A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a30">00306</A>   <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a30">__cxa_vec_delete3</A>(<FONT class=keywordtype>void</FONT> *array_address,
00307             std::size_t element_size,
00308             std::size_t padding_size,
00309              <FONT class=keywordtype>void</FONT> (*destructor) (<FONT class=keywordtype>void</FONT> *),
00310             <FONT class=keywordtype>void</FONT> (*dealloc) (<FONT class=keywordtype>void</FONT> *, std::size_t))
00311   {
00312     <FONT class=keywordtype>char</FONT> *base = static_cast &lt;char *&gt; (array_address);
00313     std::size_t size = 0;
00314     
00315     <FONT class=keywordflow>if</FONT> (padding_size)
00316       {
00317     std::size_t element_count = reinterpret_cast&lt;std::size_t *&gt; (base)[-1];
00318     base -= padding_size;
00319     size = element_count * element_size + padding_size;
00320     <FONT class=keywordflow>try</FONT>
00321       {
00322         <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/namespace____cxxabiv1.html#a26">__cxa_vec_dtor</A>(array_address, element_count, element_size,
00323                destructor);
00324       }
00325     <FONT class=keywordflow>catch</FONT> (...)
00326       {
00327         {
00328           <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/struct____cxxabiv1_1_1uncatch__exception.html">uncatch_exception</A> ue;
00329           dealloc(base, size);
00330         }
00331         <A class=code href="http://www.fifi.org/doc/gcc-3.0-base/libstdc++/html_user/exception__defines_8h.html#a2">__throw_exception_again</A>;
00332       }
00333       }
00334     dealloc(base, size);
00335   }
00336 } <FONT class=comment>// namespace __cxxabiv1</FONT>
00337 
</PRE></DIV>
      <HR>

      <ADDRESS align="right"><SMALL>Generated on Mon Apr 8 03:11:48 2002 for 
      libstdc++-v3 Source by <A href="http://www.doxygen.org/index.html"><IMG 
      height=53 alt=doxygen 
      src="C++ ABI (Teile aus cxxabi.c)-Dateien/doxygen.png" width=110 
      align=middle border=0></A>1.2.15 
</SMALL></ADDRESS><!-- eof --></TR></TBODY></TABLE></BODY></HTML>
